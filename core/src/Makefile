# Generated by GLISS V2.0 Copyright (c) 2009 IRIT - UPS (125/05/23 10:52:00)
#	WITH_DYNLIB		compile for dynamically-linkable library

RANLIB?=ranlib

SOURCES = api.c \
	fetch.c \
	decode.c \
	debug.c \
 \
	mem.c \
	grt.c \
	error.c \
	gen_int.c \
	env.c \
	loader.c \
	code.c \
	disasm.c

OBJECTS=$(SOURCES:.c=.o)

CLEAN = $(OBJECTS)
DISTCLEAN = libmos6502.a

CFLAGS += -g3 -O3 -I../include
ifdef WITH_DYNLIB
CFLAGS += -fPIC
endif


all: libmos6502.a

libmos6502.a: $(OBJECTS)
	$(AR) rcs $@ $^
	$(RANLIB) $@

clean:
	-rm -rf $(CLEAN)

distclean: clean
	-rm -rf $(DISTCLEAN)

# other dependencies
fetch.o: fetch_table.h
code.o: code_table.h
decode.o: decode_table.h
